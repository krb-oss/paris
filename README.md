# Paris

> SQLite clone written in C.

## Introduction

This project is simply a learning exercise for me to understand the fundamental
building blocks of constructing a database. Please do **not** use this software
in production.

You can find lot's of information on the [internals of sqlite] on their
website. Additionally the [SQLite Database System: Design and implementation]
book contains further technical details.

[internals of sqlite]: https://www.sqlite.org/arch.html
[sqlite database system: design and implementation]: https://play.google.com/store/books/details?id=9Z6IQQnX1JEC

![SQLite UML](http://yuml.me/1becb9f5.svg)

A query typically goes through a chain of components (shown above) in order to
retrieve or modify data. The **frontend** consists of:

* [Tokeniser](https://en.wikipedia.org/wiki/Lexical_analysis#Tokenization)
* [Parser](https://en.wikipedia.org/wiki/Parsing#Parser)
* [Code Generator](https://en.wikipedia.org/wiki/Code_generation_(compiler))

The input to the frontend is a SQL query. The output is SQLite virtual machine
bytecode (essentially a compiled program which is capable of operating on the
database). The **backend** consists of:

* [Virtual Machine](https://en.wikipedia.org/wiki/Virtual_machine)
* [B-Tree](https://en.wikipedia.org/wiki/B-tree)
* [Pager](https://en.wikipedia.org/wiki/Paging)
* [OS Interface](https://en.wikipedia.org/wiki/Interface_(computing))

The **Virtual Machine** takes bytecode generated by the frontend as
instructions. It can then perform operations on one or more tables
or indexes, each of which is stored in a data structure called a B-Tree. The VM
is essentially a big switch statement on the type of bytecode instruction.

Each **B-Tree** consists of many nodes. Each node is one page in length. The
B-Tree can retrieve a page from disk or save it back to disk by issuing
commands to the pager.

The **pager** receives commands to read or write pages of data. It is
responsible for reading/writing at appropriate offsets in the database file. It
also keeps a cache of recently-accessed pages in memory, and determines when
those pages need to be written back to disk.

The **OS Interface** is the layer that differs depending on which operating
system this program was compiled for. I'm only targeting one operating system
for this project.

## License

[BSD](LICENSE) Â© [@KRB OSS](https://github.com/krb-oss)
